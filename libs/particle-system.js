!function a(t,i,e){function r(s,c){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!c&&l)return l(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var o=i[s]={exports:{}};t[s][0].call(o.exports,function(a){var i=t[s][1][a];return r(i?i:a)},o,o.exports,a,t,i,e)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(a,t,i){"use strict";var e=function(){function a(){}return a.prototype.generateShape=function(a){var t=window.lib,i=t[a];return new i},a}();i.ShapeGenerator=e},{}],2:[function(a,t,i){"use strict";var e=function(){function a(){this.hue=0,this.hueVariance=0,this.saturation=0,this.saturationVariance=0,this.luminance=0,this.luminanceVariance=0}return a}();i.ColorData=e},{}],3:[function(a,t,i){"use strict";!function(a){a[a.Normal=0]="Normal",a[a.Random=1]="Random"}(i.AlphaCurveType||(i.AlphaCurveType={}));i.AlphaCurveType},{}],4:[function(a,t,i){var e=a("./particle/particle-emitter");window.ParticleEmitter=e.ParticleEmitter},{"./particle/particle-emitter":5}],5:[function(a,t,i){"use strict";var e=a("./particle"),r=a("../assets/shape-generator"),n=a("../enum/alpha-curve-type"),s=function(){function a(){this._frameCount=0,this._particlesPool=[],this._activeParticles=[],this.container=new createjs.Container,this.container.mouseChildren=!1,this.container.mouseEnabled=!1,this.shapeGenerator=new r.ShapeGenerator}return a.prototype.update=function(a){this._drawingData=a,this.emit(),this.animate(),this.lifeCheck()},a.prototype.animate=function(){for(var a=createjs.Matrix2D.DEG_TO_RAD*this._drawingData.accelerationDirection,t=Math.cos(a)*this._drawingData.accelerationSpeed,i=Math.sin(a)*this._drawingData.accelerationSpeed,e=0;e<this._activeParticles.length;e++){var r=this._activeParticles[e];r.vx+=t,r.vy+=i,r.vx*=1-this._drawingData.friction,r.vy*=1-this._drawingData.friction,r.x+=r.vx,r.y+=r.vy,r.particleShape.x=r.x,r.particleShape.y=r.y;var s=r.currentLife/r.totalLife;switch(Number(r.alphaCurveType)){case n.AlphaCurveType.Random:var c=Math.min(r.finishAlpha,r.startAlpha),l=Math.max(r.finishAlpha,r.startAlpha);r.particleShape.alpha=Math.random()*(l-c)+c;break;case n.AlphaCurveType.Normal:default:var h=this.calcCurrentValue(r.startAlpha,r.finishAlpha,s);r.particleShape.alpha=h}var o=this.calcCurrentValue(r.startScale,r.finishScale,s);r.particleShape.scaleX=r.particleShape.scaleY=o,r.currentLife<0&&(r.isAlive=!1),r.currentLife--}},a.prototype.lifeCheck=function(){for(var a=0;a<this._activeParticles.length;a++)if(!this._activeParticles[a].isAlive){var t=this._activeParticles[a];this.container.removeChild(t.particleShape),this._activeParticles.splice(a,1),this._particlesPool.push(t),a--}},a.prototype.clear=function(){for(var a=0;a<this._activeParticles.length;a++){var t=this._activeParticles[a];t.isAlive=!1,this.container.removeChild(t.particleShape),this._activeParticles.splice(a,1),this._particlesPool.push(t),a--}},a.prototype.dispose=function(){for(var a=0;a<this._activeParticles.length;a++){var t=this._activeParticles[a];t.isAlive=!1,this.container.removeChild(t.particleShape)}this._activeParticles.splice(0,this._activeParticles.length),this._particlesPool.splice(0,this._particlesPool.length),this._activeParticles=null,this._particlesPool=null,this.container=null},a.prototype.emit=function(){for(var a=Math.round(createjs.Ticker.framerate),t=this._frameCount%a,i=this._drawingData.emitFrequency,e=Math.floor(i/a),r=0;e>r;r++)this.emitParticle();var n=i/a-e;t%Math.floor(1/n)==0&&this.emitParticle(),this._frameCount++,this._frameCount>=a&&(this._frameCount=0)},a.prototype.emitParticle=function(){var a=this.generateParticle();this.container.addChild(a.particleShape),this._activeParticles.push(a)},a.prototype.generateParticle=function(){var a=null;return a=this._particlesPool.length>=1?this._particlesPool.shift():new e.Particle,this.setParticleParamater(a),a},a.prototype.setParticleParamater=function(a){a.particleShape.removeAllChildren(),a.isAlive=!0,a.x=this.calcRandomValueWithVariance(this._drawingData.startX,this._drawingData.startXVariance,!1),a.y=this.calcRandomValueWithVariance(this._drawingData.startY,this._drawingData.startYVariance,!1),this.generateShape(a,this._drawingData.shapeIdList),a.totalLife=Math.max(1,this.calcRandomValueWithVariance(this._drawingData.lifeSpan,this._drawingData.lifeSpanVariance,!0)),a.currentLife=a.totalLife;var t=Math.max(0,this.calcRandomValueWithVariance(this._drawingData.initialSpeed,this._drawingData.initialSpeedVariance,!1)),i=createjs.Matrix2D.DEG_TO_RAD*this.calcRandomValueWithVariance(this._drawingData.initialDirection,this._drawingData.initialDirectionVariance,!1);a.vx=Math.cos(i)*t,a.vy=Math.sin(i)*t,a.startAlpha=this.calcRandomValueWithRange(0,1,this.calcRandomValueWithVariance(this._drawingData.startAlpha,this._drawingData.startAlphaVariance,!1)),a.finishAlpha=this.calcRandomValueWithRange(0,1,this.calcRandomValueWithVariance(this._drawingData.finishAlpha,this._drawingData.finishAlphaVariance,!1)),a.startScale=Math.max(0,this.calcRandomValueWithVariance(this._drawingData.startScale,this._drawingData.startScaleVariance,!1)),a.finishScale=Math.max(0,this.calcRandomValueWithVariance(this._drawingData.finishScale,this._drawingData.finishScaleVariance,!1)),a.particleShape.compositeOperation=1==this._drawingData.blendMode?"lighter":null,a.alphaCurveType=this._drawingData.alphaCurveType},a.prototype.generateShape=function(t,i){t.particleShape.removeAllChildren();var e=this._drawingData.startColor;t.startColor.hue=this.calcRandomValueWithVariance(e.hue,e.hueVariance,!1)%360,t.startColor.luminance=this.calcRandomValueWithVariance(e.luminance,e.luminanceVariance,!1),t.startColor.saturation=this.calcRandomValueWithVariance(e.saturation,e.saturationVariance,!1);var r=Number(t.startColor.hue),n=Number(t.startColor.saturation),s=Number(t.startColor.luminance),c="hsl("+r+", "+n+"%, "+s+"%)",l=Math.floor(Math.random()*this._drawingData.shapeIdList.length),h=0==this._drawingData.shapeIdList.length?"":this._drawingData.shapeIdList[l];t.colorCommand=null;var o=this.shapeGenerator.generateShape(h);t.particleShape.addChild(o);var p=o.getChildAt(0);if(null!=p){var u=p.graphics.instructions;if(u&&u.length>0)for(var d=0;d<u.length;d++){var f=u[d];if(f instanceof createjs.Graphics.Fill)if(f.style instanceof CanvasGradient){var m=f.style,v=a.HELPER_GRAPHICS,_=v.beginRadialGradientFill([c,"hsla("+r+", "+n+"%, "+s+"%, 0)"],m.props.ratios,m.props.x0,m.props.y0,m.props.r0,m.props.x1,m.props.y1,m.props.r1).command;u[d]=_}else f.style=c,t.colorCommand=f;else f instanceof createjs.Graphics.Stroke&&(f.style=c,t.colorCommand=f)}}},a.prototype.calcRandomValueWithRange=function(a,t,i){return Math.min(t,Math.max(a,i))},a.prototype.calcRandomValueWithVariance=function(a,t,i){var e=Number(a)+(Math.random()-.5)*t;return 1==i?Math.floor(e):e},a.prototype.calcCurrentValue=function(a,t,i){return Number(a)*i+Number(t)*(1-i)},a.HELPER_GRAPHICS=new createjs.Graphics,a}();i.ParticleEmitter=s},{"../assets/shape-generator":1,"../enum/alpha-curve-type":3,"./particle":6}],6:[function(a,t,i){"use strict";var e=a("../data/data-color"),r=function(){function a(){this.particleShape=new createjs.Container,this.startColor=new e.ColorData}return a}();i.Particle=r},{"../data/data-color":2}]},{},[4]);
